<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="utf-8" />
  <title>‡§Æ‡§π‡§æ‡§∞‡§æ‡§ú ‡§ú‡§®‡§∞‡§≤ ‡§∏‡•ç‡§ü‡•ã‡§∞</title>

  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
    }

    table {
      border-collapse: collapse;
      width: 80%;
      margin-top: 10px;
    }

    th, td {
      border: 1px solid #333;
      padding: 8px;
      text-align: left;
    }

    th {
      background-color: #f2f2f2;
    }

    .whatsapp-btn {
      background-color: #25d366;
      color: white;
      padding: 10px 16px;
      border: none;
      border-radius: 6px;
      font-size: 15px;
      cursor: pointer;
      font-weight: bold;
    }

    .cart-btn {
      background: #ff9800;
      color: white;
      border: none;
      padding: 6px 10px;
      border-radius: 4px;
      cursor: pointer;
    }

    .remove-btn {
      background: #e53935;
      color: white;
      border: none;
      padding: 3px 8px;
      border-radius: 4px;
      cursor: pointer;
      margin-left: 8px;
    }

    .order-search-bar {
      display: flex;
      gap: 10px;
      align-items: center;
      margin-bottom: 10px;
      flex-wrap: wrap;
    }

    #searchBox {
      padding: 8px;
      width: 220px;
    }

    .cart-box {
      border: 2px dashed #25d366;
      padding: 12px;
      margin-top: 20px;
      width: 80%;
    }

    .cart-item {
      margin-bottom: 6px;
    }
  </style>

  <script>
    let cart = [];

    async function loadProducts() {
      const csvUrl =
        "https://docs.google.com/spreadsheets/d/1gUnQPlyJVKctXsGA2gshdUGJf1tmtVqAJQ_W1W-2nC8/export?format=csv";

      const response = await fetch(csvUrl);
      const csvText = await response.text();
      const lines = csvText.split("\n");

      const tbody = document.getElementById("product-table-body");
      tbody.innerHTML = "";

      for (let i = 1; i < lines.length; i++) {
        const cells = lines[i].split(",");

        if (cells.length >= 2 && cells[0].trim()) {
          const name = cells[0].trim();
          const price = cells[1].trim();

          const row = document.createElement("tr");
          row.innerHTML = `
            <td>${name}</td>
            <td>‚Çπ ${price}</td>
            <td>
              <button class="cart-btn" onclick="addToCart('${name}', ${price})">
                Add to Cart
              </button>
            </td>
          `;
          tbody.appendChild(row);
        }
      }
    }

    function addToCart(name, price) {
      if (cart.some(item => item.name === name)) return;
      cart.push({ name, price });
      renderCart();
    }

    function removeFromCart(index) {
      cart.splice(index, 1);
      renderCart();
    }

    function renderCart() {
      const cartList = document.getElementById("cart-items");
      cartList.innerHTML = "";

      let total = 0;

      cart.forEach((item, index) => {
        total += item.price;
        const div = document.createElement("div");
        div.className = "cart-item";
        div.innerHTML = `
          ${item.name} ‚Äì ‚Çπ${item.price}
          <button class="remove-btn" onclick="removeFromCart(${index})">‚ùå</button>
        `;
        cartList.appendChild(div);
      });

      document.getElementById("cart-total").innerText = total;
    }

    function placeOrderFromCart() {
      if (cart.length === 0) {
        alert("Cart is empty");
        return;
      }

      let message = "Hello, I want to order:\n\n";
      let total = 0;

      cart.forEach(item => {
        message += `${item.name} ‚Äì ‚Çπ${item.price}\n`;
        total += item.price;
      });

      message += "\nTotal: ‚Çπ" + total;

      window.open(
        "https://wa.me/919807439655?text=" +
        encodeURIComponent(message),
        "_blank"
      );
    }

    function searchProducts() {
      const value = document.getElementById("searchBox").value.toLowerCase();
      document.querySelectorAll("#product-table-body tr").forEach(row => {
        row.style.display = row.children[0].innerText
          .toLowerCase()
          .includes(value)
          ? ""
          : "none";
      });
    }
  </script>
</head>

<body onload="loadProducts()">

  <h3>üõçÔ∏è Our Products & Prices</h3>

  <div class="order-search-bar">
    <input
      type="text"
      id="searchBox"
      placeholder="üîç Search product"
      onkeyup="searchProducts()"
    />
  </div>

  <table>
    <tr>
      <th>Product Name</th>
      <th>Price</th>
      <th>Add</th>
    </tr>
    <tbody id="product-table-body"></tbody>
  </table>

  <div class="cart-box">
    <h3>üõí Your Cart</h3>
    <div id="cart-items"></div>

    <p><strong>Total: ‚Çπ <span id="cart-total">0</span></strong></p>

    <button class="whatsapp-btn" onclick="placeOrderFromCart()">
      Place Your Order
    </button>
  </div>

</body>
</html>
