<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="utf-8" />
  <title>‡§Æ‡§π‡§æ‡§∞‡§æ‡§ú ‡§ú‡§®‡§∞‡§≤ ‡§∏‡•ç‡§ü‡•ã‡§∞</title>

  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }

    .logo-intro {
      display: flex;
      gap: 20px;
      align-items: center;
      margin-bottom: 20px;
    }

    table {
      border-collapse: collapse;
      width: 80%;
      margin-top: 10px;
    }

    th, td {
      border: 1px solid #333;
      padding: 8px;
      text-align: left;
    }

    th { background-color: #f2f2f2; }

    .qty-btn {
      padding: 4px 8px;
      border: 1px solid #ccc;
      background: #f7f7f7;
      cursor: pointer;
      border-radius: 4px;
    }

    .qty-btn:hover { background: #eaeaea; }

    .qty-box { padding: 0 8px; font-weight: bold; }

    .remove-btn {
      background: transparent;
      border: none;
      cursor: pointer;
      font-size: 16px;
      margin-left: 6px;
      color: #555;
    }

    .remove-btn:hover { color: #000; }

    .whatsapp-btn {
      background: #25d366;
      color: white;
      padding: 10px 16px;
      border: none;
      border-radius: 6px;
      font-weight: bold;
      cursor: pointer;
    }

    .cart-box {
      border: 2px dashed #25d366;
      padding: 12px;
      width: 80%;
      margin-top: 10px;
    }

    .top-bar {
      display: flex;
      gap: 10px;
      align-items: center;
      margin-bottom: 10px;
    }

    .tab-btn {
      padding: 8px 14px;
      border: 1px solid #ccc;
      background: #f7f7f7;
      cursor: pointer;
      border-radius: 6px;
      font-weight: bold;
    }

    .tab-btn.active {
      background: #25d366;
      color: white;
      border-color: #25d366;
    }

    #searchBox { padding: 8px; width: 220px; }
  </style>

  <script>
    let cart = [];

    async function loadProducts() {
      const csvUrl =
        "https://docs.google.com/spreadsheets/d/1gUnQPlyJVKctXsGA2gshdUGJf1tmtVqAJQ_W1W-2nC8/export?format=csv";

      const response = await fetch(csvUrl);
      const text = await response.text();
      const lines = text.split("\n");
      const tbody = document.getElementById("product-table-body");

      tbody.innerHTML = "";

      for (let i = 1; i < lines.length; i++) {
        const [name, price] = lines[i].split(",");
        if (!name) continue;

        tbody.innerHTML += `
          <tr>
            <td>${name.trim()}</td>
            <td>‚Çπ ${price.trim()}</td>
            <td>
              <button class="qty-btn" onclick="changeQty('${name}', ${price}, -1)">‚àí</button>
              <span class="qty-box" id="qty-${name}">0</span>
              <button class="qty-btn" onclick="changeQty('${name}', ${price}, 1)">+</button>
            </td>
          </tr>`;
      }
    }

    function changeQty(name, price, delta) {
      let item = cart.find(p => p.name === name);

      if (!item && delta > 0) cart.push({ name, price, qty: 1 });
      else if (item) {
        item.qty += delta;
        if (item.qty <= 0) cart = cart.filter(p => p.name !== name);
      }

      document.getElementById(`qty-${name}`).innerText =
        cart.find(p => p.name === name)?.qty || 0;

      renderCart();
    }

    function renderCart() {
      const box = document.getElementById("cart-items");
      box.innerHTML = "";
      let total = 0;

      cart.forEach((item, i) => {
        total += item.qty * item.price;
        box.innerHTML += `
          ${item.name} √ó ${item.qty} = ‚Çπ${item.qty * item.price}
          <button class="remove-btn" onclick="removeOne(${i})">‚úï</button><br>`;
      });

      document.getElementById("cart-total").innerText = total;
    }

    function removeOne(i) {
      cart[i].qty--;
      if (cart[i].qty <= 0) cart.splice(i, 1);
      renderCart();
    }

    function placeOrderFromCart() {
      let msg = "Hello, I want to order:\n\n";
      let total = 0;

      cart.forEach(i => {
        msg += `${i.name} √ó ${i.qty} ‚Äì ‚Çπ${i.qty * i.price}\n`;
        total += i.qty * i.price;
      });

      msg += "\nTotal: ‚Çπ" + total;
      window.open("https://wa.me/919807439655?text=" + encodeURIComponent(msg));
    }

    function showProducts() {
      document.getElementById("products-section").style.display = "block";
      document.getElementById("cart-section").style.display = "none";
    }

    function showCart() {
      document.getElementById("products-section").style.display = "none";
      document.getElementById("cart-section").style.display = "block";
    }
  </script>
</head>

<body onload="loadProducts(); showProducts();">

  <!-- ‚úÖ SHOP DETAILS -->
  <div class="logo-intro">
    <img src="circle-cropped.png" width="160" />
    <div>
      <h1>‡§Æ‡§π‡§æ‡§∞‡§æ‡§ú ‡§ú‡§®‡§∞‡§≤ ‡§∏‡•ç‡§ü‡•ã‡§∞</h1>
      <p><em>‡§ú‡§π‡§æ‡§Å ‡§π‡§∞ ‡§ó‡•ç‡§∞‡§æ‡§π‡§ï ‡§π‡§Æ‡§æ‡§∞‡§æ ‡§™‡§∞‡§ø‡§µ‡§æ‡§∞ ‡§π‡•à‡•§</em></p>
    </div>
  </div>

  <p>
    Sangam Vihar Colony, Haveliya, Jhusi, Prayagraj ‚Äì 211019<br>
    <a href="https://share.google/S43snEszKCxEfAIOi" target="_blank">View on Google Maps</a>
  </p>

  <p>
    üõí ‚Çπ999+ ‡§™‡§∞ ‡§Æ‡•Å‡§´‡•ç‡§§ ‡§°‡§ø‡§≤‡•Ä‡§µ‡§∞‡•Ä | ‚è∞ 1‚Äì3 PM & 8‚Äì9 PM
  </p>

  <hr>

  <!-- SEARCH + CART TAB -->
  <div class="top-bar">
    <input id="searchBox" placeholder="üîç Search product" />
    <button class="tab-btn active" onclick="showProducts()">Products</button>
    <button class="tab-btn" onclick="showCart()">üõí Your Cart</button>
  </div>

  <!-- PRODUCTS -->
  <div id="products-section">
    <table>
      <tr><th>Product</th><th>Price</th><th>Qty</th></tr>
      <tbody id="product-table-body"></tbody>
    </table>
  </div>

  <!-- CART -->
  <div id="cart-section" style="display:none;">
    <div class="cart-box">
      <h3>Your Cart</h3>
      <div id="cart-items"></div>
      <p><strong>Total ‚Çπ <span id="cart-total">0</span></strong></p>
      <button class="whatsapp-btn" onclick="placeOrderFromCart()">Place Your Order</button>
    </div>
  </div>

</body>
</html>
